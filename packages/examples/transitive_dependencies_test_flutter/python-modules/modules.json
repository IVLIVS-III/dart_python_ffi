{"python_ffi":{"name":"python_ffi.py","base64":"ZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBDYWxsYWJsZSwgR2VuZXJhdG9yLCBJdGVyYXRvciwgU2VsZiwgVHlwZVZhciwgR2VuZXJpYwoKClQgPSBUeXBlVmFyKCJUIikKCgpAZGF0YWNsYXNzCmNsYXNzIFB5dGhvbkZmaUl0ZXJhdG9yKEdlbmVyaWNbVF0pOgogICAgZGFydF9tb3ZlX25leHQ6IENhbGxhYmxlW1tdLCBib29sXQogICAgZGFydF9jdXJyZW50OiBDYWxsYWJsZVtbXSwgVF0KCiAgICBkZWYgX19pdGVyX18oc2VsZjogU2VsZikgLT4gU2VsZjoKICAgICAgICByZXR1cm4gc2VsZgoKICAgIGRlZiBfX25leHRfXyhzZWxmOiBTZWxmKSAtPiBUOgogICAgICAgIGlmIHNlbGYuZGFydF9tb3ZlX25leHQoKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZGFydF9jdXJyZW50KCkKICAgICAgICByYWlzZSBTdG9wSXRlcmF0aW9uCgoKQGRhdGFjbGFzcwpjbGFzcyBQeXRob25GZmlJdGVyYWJsZShHZW5lcmljW1RdKToKICAgIGRhcnRfaXRlcjogQ2FsbGFibGVbW10sIEl0ZXJhdG9yW1RdXQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmOiBTZWxmKSAtPiBJdGVyYXRvcltUXToKICAgICAgICByZXR1cm4gc2VsZi5kYXJ0X2l0ZXIoKQoKCkBkYXRhY2xhc3MoKQpjbGFzcyBQeXRob25GZmlBd2FpdGFibGUoR2VuZXJpY1tUXSk6CiAgICBkYXJ0X2lzX2RvbmU6IENhbGxhYmxlW1tdLCBib29sXQogICAgZGFydF9yZXN1bHQ6IENhbGxhYmxlW1tdLCBUXQoKICAgIGRlZiBfX2F3YWl0X18oc2VsZjogU2VsZikgLT4gR2VuZXJhdG9yW1QsIE5vbmUsIE5vbmVdOgogICAgICAgIHdoaWxlIG5vdCBzZWxmLmRhcnRfaXNfZG9uZSgpOgogICAgICAgICAgICB5aWVsZCBOb25lCiAgICAgICAgcmV0dXJuIHNlbGYuZGFydF9yZXN1bHQoKQo="},"sgmllib":{"name":"sgmllib.py","base64":"IiIiQSBwYXJzZXIgZm9yIFNHTUwsIHVzaW5nIHRoZSBkZXJpdmVkIGNsYXNzIGFzIGEgc3RhdGljIERURC4iIiIKCiMgWFhYIFRoaXMgb25seSBzdXBwb3J0cyB0aG9zZSBTR01MIGZlYXR1cmVzIHVzZWQgYnkgSFRNTC4KCiMgWFhYIFRoZXJlIHNob3VsZCBiZSBhIHdheSB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuIFBDREFUQSAocGFyc2VkCiMgY2hhcmFjdGVyIGRhdGEgLS0gdGhlIG5vcm1hbCBjYXNlKSwgUkNEQVRBIChyZXBsYWNlYWJsZSBjaGFyYWN0ZXIKIyBkYXRhIC0tIG9ubHkgY2hhciBhbmQgZW50aXR5IHJlZmVyZW5jZXMgYW5kIGVuZCB0YWdzIGFyZSBzcGVjaWFsKQojIGFuZCBDREFUQSAoY2hhcmFjdGVyIGRhdGEgLS0gb25seSBlbmQgdGFncyBhcmUgc3BlY2lhbCkuICBSQ0RBVEEgaXMKIyBub3Qgc3VwcG9ydGVkIGF0IGFsbC4KCmltcG9ydCBfbWFya3VwYmFzZQppbXBvcnQgcmUKCl9fYWxsX18gPSBbIlNHTUxQYXJzZXIiLCAiU0dNTFBhcnNlRXJyb3IiXQoKIyBSZWd1bGFyIGV4cHJlc3Npb25zIHVzZWQgZm9yIHBhcnNpbmcKCmludGVyZXN0aW5nID0gcmUuY29tcGlsZSgnWyY8XScpCmluY29tcGxldGUgPSByZS5jb21waWxlKCcmKFthLXpBLVpdW2EtekEtWjAtOV0qfCNbMC05XSopP3wnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8KFthLXpBLVpdW148Pl0qfCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy8oW2EtekEtWl1bXjw+XSopP3wnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICchW148Pl0qKT8nKQoKZW50aXR5cmVmID0gcmUuY29tcGlsZSgnJihbYS16QS1aXVstLmEtekEtWjAtOV0qKVteYS16QS1aMC05XScpCmNoYXJyZWYgPSByZS5jb21waWxlKCcmIyhbMC05XSspW14wLTldJykKCnN0YXJ0dGFnb3BlbiA9IHJlLmNvbXBpbGUoJzxbPmEtekEtWl0nKQpzaG9ydHRhZ29wZW4gPSByZS5jb21waWxlKCc8W2EtekEtWl1bLS5hLXpBLVowLTldKi8nKQpzaG9ydHRhZyA9IHJlLmNvbXBpbGUoJzwoW2EtekEtWl1bLS5hLXpBLVowLTldKikvKFteL10qKS8nKQpwaWNsb3NlID0gcmUuY29tcGlsZSgnPicpCmVuZGJyYWNrZXQgPSByZS5jb21waWxlKCdbPD5dJykKdGFnZmluZCA9IHJlLmNvbXBpbGUoJ1thLXpBLVpdWy1fLmEtekEtWjAtOV0qJykKYXR0cmZpbmQgPSByZS5jb21waWxlKAogICAgcidccyooW2EtekEtWl9dWy06LmEtekEtWl8wLTldKikoXHMqPVxzKicKICAgIHInKFwnW15cJ10qXCd8IlteIl0qInxbXVtcLWEtekEtWjAtOS4vLDo7KyolPyEmJFwoXClfIz1+XCciQF0qKSk/JykKCgpjbGFzcyBTR01MUGFyc2VFcnJvcihSdW50aW1lRXJyb3IpOgogICAgIiIiRXhjZXB0aW9uIHJhaXNlZCBmb3IgYWxsIHBhcnNlIGVycm9ycy4iIiIKICAgIHBhc3MKCgojIFNHTUwgcGFyc2VyIGJhc2UgY2xhc3MgLS0gZmluZCB0YWdzIGFuZCBjYWxsIGhhbmRsZXIgZnVuY3Rpb25zLgojIFVzYWdlOiBwID0gU0dNTFBhcnNlcigpOyBwLmZlZWQoZGF0YSk7IC4uLjsgcC5jbG9zZSgpLgojIFRoZSBkdGQgaXMgZGVmaW5lZCBieSBkZXJpdmluZyBhIGNsYXNzIHdoaWNoIGRlZmluZXMgbWV0aG9kcwojIHdpdGggc3BlY2lhbCBuYW1lcyB0byBoYW5kbGUgdGFnczogc3RhcnRfZm9vIGFuZCBlbmRfZm9vIHRvIGhhbmRsZQojIDxmb28+IGFuZCA8L2Zvbz4sIHJlc3BlY3RpdmVseSwgb3IgZG9fZm9vIHRvIGhhbmRsZSA8Zm9vPiBieSBpdHNlbGYuCiMgKFRhZ3MgYXJlIGNvbnZlcnRlZCB0byBsb3dlciBjYXNlIGZvciB0aGlzIHB1cnBvc2UuKSAgVGhlIGRhdGEKIyBiZXR3ZWVuIHRhZ3MgaXMgcGFzc2VkIHRvIHRoZSBwYXJzZXIgYnkgY2FsbGluZyBzZWxmLmhhbmRsZV9kYXRhKCkKIyB3aXRoIHNvbWUgZGF0YSBhcyBhcmd1bWVudCAodGhlIGRhdGEgbWF5IGJlIHNwbGl0IHVwIGluIGFyYml0cmFyeQojIGNodW5rcykuICBFbnRpdHkgcmVmZXJlbmNlcyBhcmUgcGFzc2VkIGJ5IGNhbGxpbmcKIyBzZWxmLmhhbmRsZV9lbnRpdHlyZWYoKSB3aXRoIHRoZSBlbnRpdHkgcmVmZXJlbmNlIGFzIGFyZ3VtZW50LgoKY2xhc3MgU0dNTFBhcnNlcihfbWFya3VwYmFzZS5QYXJzZXJCYXNlKToKICAgICMgRGVmaW5pdGlvbiBvZiBlbnRpdGllcyAtLSBkZXJpdmVkIGNsYXNzZXMgbWF5IG92ZXJyaWRlCiAgICBlbnRpdHlfb3JfY2hhcnJlZiA9IHJlLmNvbXBpbGUoJyYoPzonCiAgICAgICcoW2EtekEtWl1bLS5hLXpBLVowLTldKil8IyhbMC05XSspJwogICAgICAnKSg7PyknKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2ZXJib3NlPTApOgogICAgICAgICIiIkluaXRpYWxpemUgYW5kIHJlc2V0IHRoaXMgaW5zdGFuY2UuIiIiCiAgICAgICAgc2VsZi52ZXJib3NlID0gdmVyYm9zZQogICAgICAgIHNlbGYucmVzZXQoKQoKICAgIGRlZiByZXNldChzZWxmKToKICAgICAgICAiIiJSZXNldCB0aGlzIGluc3RhbmNlLiBMb3NlcyBhbGwgdW5wcm9jZXNzZWQgZGF0YS4iIiIKICAgICAgICBzZWxmLl9fc3RhcnR0YWdfdGV4dCA9IE5vbmUKICAgICAgICBzZWxmLnJhd2RhdGEgPSAnJwogICAgICAgIHNlbGYuc3RhY2sgPSBbXQogICAgICAgIHNlbGYubGFzdHRhZyA9ICc/Pz8nCiAgICAgICAgc2VsZi5ub21vcmV0YWdzID0gMAogICAgICAgIHNlbGYubGl0ZXJhbCA9IDAKICAgICAgICBfbWFya3VwYmFzZS5QYXJzZXJCYXNlLnJlc2V0KHNlbGYpCgogICAgZGVmIHNldG5vbW9yZXRhZ3Moc2VsZik6CiAgICAgICAgIiIiRW50ZXIgbGl0ZXJhbCBtb2RlIChDREFUQSkgdGlsbCBFT0YuCgogICAgICAgIEludGVuZGVkIGZvciBkZXJpdmVkIGNsYXNzZXMgb25seS4KICAgICAgICAiIiIKICAgICAgICBzZWxmLm5vbW9yZXRhZ3MgPSBzZWxmLmxpdGVyYWwgPSAxCgogICAgZGVmIHNldGxpdGVyYWwoc2VsZiwgKmFyZ3MpOgogICAgICAgICIiIkVudGVyIGxpdGVyYWwgbW9kZSAoQ0RBVEEpLgoKICAgICAgICBJbnRlbmRlZCBmb3IgZGVyaXZlZCBjbGFzc2VzIG9ubHkuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5saXRlcmFsID0gMQoKICAgIGRlZiBmZWVkKHNlbGYsIGRhdGEpOgogICAgICAgICIiIkZlZWQgc29tZSBkYXRhIHRvIHRoZSBwYXJzZXIuCgogICAgICAgIENhbGwgdGhpcyBhcyBvZnRlbiBhcyB5b3Ugd2FudCwgd2l0aCBhcyBsaXR0bGUgb3IgYXMgbXVjaCB0ZXh0CiAgICAgICAgYXMgeW91IHdhbnQgKG1heSBpbmNsdWRlICdcbicpLiAgKFRoaXMganVzdCBzYXZlcyB0aGUgdGV4dCwKICAgICAgICBhbGwgdGhlIHByb2Nlc3NpbmcgaXMgZG9uZSBieSBnb2FoZWFkKCkuKQogICAgICAgICIiIgoKICAgICAgICBzZWxmLnJhd2RhdGEgPSBzZWxmLnJhd2RhdGEgKyBkYXRhCiAgICAgICAgc2VsZi5nb2FoZWFkKDApCgogICAgZGVmIGNsb3NlKHNlbGYpOgogICAgICAgICIiIkhhbmRsZSB0aGUgcmVtYWluaW5nIGRhdGEuIiIiCiAgICAgICAgc2VsZi5nb2FoZWFkKDEpCgogICAgZGVmIGVycm9yKHNlbGYsIG1lc3NhZ2UpOgogICAgICAgIHJhaXNlIFNHTUxQYXJzZUVycm9yKG1lc3NhZ2UpCgogICAgIyBJbnRlcm5hbCAtLSBoYW5kbGUgZGF0YSBhcyBmYXIgYXMgcmVhc29uYWJsZS4gIE1heSBsZWF2ZSBzdGF0ZQogICAgIyBhbmQgZGF0YSB0byBiZSBwcm9jZXNzZWQgYnkgYSBzdWJzZXF1ZW50IGNhbGwuICBJZiAnZW5kJyBpcwogICAgIyB0cnVlLCBmb3JjZSBoYW5kbGluZyBhbGwgZGF0YSBhcyBpZiBmb2xsb3dlZCBieSBFT0YgbWFya2VyLgogICAgZGVmIGdvYWhlYWQoc2VsZiwgZW5kKToKICAgICAgICByYXdkYXRhID0gc2VsZi5yYXdkYXRhCiAgICAgICAgaSA9IDAKICAgICAgICBuID0gbGVuKHJhd2RhdGEpCiAgICAgICAgd2hpbGUgaSA8IG46CiAgICAgICAgICAgIGlmIHNlbGYubm9tb3JldGFnczoKICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX2RhdGEocmF3ZGF0YVtpOm5dKQogICAgICAgICAgICAgICAgaSA9IG4KICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIG1hdGNoID0gaW50ZXJlc3Rpbmcuc2VhcmNoKHJhd2RhdGEsIGkpCiAgICAgICAgICAgIGlmIG1hdGNoOiBqID0gbWF0Y2guc3RhcnQoKQogICAgICAgICAgICBlbHNlOiBqID0gbgogICAgICAgICAgICBpZiBpIDwgajoKICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX2RhdGEocmF3ZGF0YVtpOmpdKQogICAgICAgICAgICBpID0gagogICAgICAgICAgICBpZiBpID09IG46IGJyZWFrCiAgICAgICAgICAgIGlmIHJhd2RhdGFbaV0gPT0gJzwnOgogICAgICAgICAgICAgICAgaWYgc3RhcnR0YWdvcGVuLm1hdGNoKHJhd2RhdGEsIGkpOgogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYubGl0ZXJhbDoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVfZGF0YShyYXdkYXRhW2ldKQogICAgICAgICAgICAgICAgICAgICAgICBpID0gaSsxCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgayA9IHNlbGYucGFyc2Vfc3RhcnR0YWcoaSkKICAgICAgICAgICAgICAgICAgICBpZiBrIDwgMDogYnJlYWsKICAgICAgICAgICAgICAgICAgICBpID0gawogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBpZiByYXdkYXRhLnN0YXJ0c3dpdGgoIjwvIiwgaSk6CiAgICAgICAgICAgICAgICAgICAgayA9IHNlbGYucGFyc2VfZW5kdGFnKGkpCiAgICAgICAgICAgICAgICAgICAgaWYgayA8IDA6IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgaSA9IGsKICAgICAgICAgICAgICAgICAgICBzZWxmLmxpdGVyYWwgPSAwCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGlmIHNlbGYubGl0ZXJhbDoKICAgICAgICAgICAgICAgICAgICBpZiBuID4gKGkgKyAxKToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVfZGF0YSgiPCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBpKzEKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAjIGluY29tcGxldGUKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgaWYgcmF3ZGF0YS5zdGFydHN3aXRoKCI8IS0tIiwgaSk6CiAgICAgICAgICAgICAgICAgICAgICAgICMgU3RyaWN0bHkgc3BlYWtpbmcsIGEgY29tbWVudCBpcyAtLS4qLS0KICAgICAgICAgICAgICAgICAgICAgICAgIyB3aXRoaW4gYSBkZWNsYXJhdGlvbiB0YWcgPCEuLi4+LgogICAgICAgICAgICAgICAgICAgICAgICAjIFRoaXMgc2hvdWxkIGJlIHJlbW92ZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICMgYW5kIGNvbW1lbnRzIGhhbmRsZWQgb25seSBpbiBwYXJzZV9kZWNsYXJhdGlvbi4KICAgICAgICAgICAgICAgICAgICBrID0gc2VsZi5wYXJzZV9jb21tZW50KGkpCiAgICAgICAgICAgICAgICAgICAgaWYgayA8IDA6IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgaSA9IGsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgaWYgcmF3ZGF0YS5zdGFydHN3aXRoKCI8PyIsIGkpOgogICAgICAgICAgICAgICAgICAgIGsgPSBzZWxmLnBhcnNlX3BpKGkpCiAgICAgICAgICAgICAgICAgICAgaWYgayA8IDA6IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgaSA9IGkrawogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBpZiByYXdkYXRhLnN0YXJ0c3dpdGgoIjwhIiwgaSk6CiAgICAgICAgICAgICAgICAgICAgIyBUaGlzIGlzIHNvbWUgc29ydCBvZiBkZWNsYXJhdGlvbjsgaW4gIkhUTUwgYXMKICAgICAgICAgICAgICAgICAgICAjIGRlcGxveWVkLCIgdGhpcyBzaG91bGQgb25seSBiZSB0aGUgZG9jdW1lbnQgdHlwZQogICAgICAgICAgICAgICAgICAgICMgZGVjbGFyYXRpb24gKCI8IURPQ1RZUEUgaHRtbC4uLj4iKS4KICAgICAgICAgICAgICAgICAgICBrID0gc2VsZi5wYXJzZV9kZWNsYXJhdGlvbihpKQogICAgICAgICAgICAgICAgICAgIGlmIGsgPCAwOiBicmVhawogICAgICAgICAgICAgICAgICAgIGkgPSBrCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZWxpZiByYXdkYXRhW2ldID09ICcmJzoKICAgICAgICAgICAgICAgIGlmIHNlbGYubGl0ZXJhbDoKICAgICAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZV9kYXRhKHJhd2RhdGFbaV0pCiAgICAgICAgICAgICAgICAgICAgaSA9IGkrMQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBtYXRjaCA9IGNoYXJyZWYubWF0Y2gocmF3ZGF0YSwgaSkKICAgICAgICAgICAgICAgIGlmIG1hdGNoOgogICAgICAgICAgICAgICAgICAgIG5hbWUgPSBtYXRjaC5ncm91cCgxKQogICAgICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX2NoYXJyZWYobmFtZSkKICAgICAgICAgICAgICAgICAgICBpID0gbWF0Y2guZW5kKDApCiAgICAgICAgICAgICAgICAgICAgaWYgcmF3ZGF0YVtpLTFdICE9ICc7JzogaSA9IGktMQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBtYXRjaCA9IGVudGl0eXJlZi5tYXRjaChyYXdkYXRhLCBpKQogICAgICAgICAgICAgICAgaWYgbWF0Y2g6CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG1hdGNoLmdyb3VwKDEpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVfZW50aXR5cmVmKG5hbWUpCiAgICAgICAgICAgICAgICAgICAgaSA9IG1hdGNoLmVuZCgwKQogICAgICAgICAgICAgICAgICAgIGlmIHJhd2RhdGFbaS0xXSAhPSAnOyc6IGkgPSBpLTEKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi5lcnJvcignbmVpdGhlciA8IG5vciAmID8/JykKICAgICAgICAgICAgIyBXZSBnZXQgaGVyZSBvbmx5IGlmIGluY29tcGxldGUgbWF0Y2hlcyBidXQKICAgICAgICAgICAgIyBub3RoaW5nIGVsc2UKICAgICAgICAgICAgbWF0Y2ggPSBpbmNvbXBsZXRlLm1hdGNoKHJhd2RhdGEsIGkpCiAgICAgICAgICAgIGlmIG5vdCBtYXRjaDoKICAgICAgICAgICAgICAgIHNlbGYuaGFuZGxlX2RhdGEocmF3ZGF0YVtpXSkKICAgICAgICAgICAgICAgIGkgPSBpKzEKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGogPSBtYXRjaC5lbmQoMCkKICAgICAgICAgICAgaWYgaiA9PSBuOgogICAgICAgICAgICAgICAgYnJlYWsgIyBSZWFsbHkgaW5jb21wbGV0ZQogICAgICAgICAgICBzZWxmLmhhbmRsZV9kYXRhKHJhd2RhdGFbaTpqXSkKICAgICAgICAgICAgaSA9IGoKICAgICAgICAjIGVuZCB3aGlsZQogICAgICAgIGlmIGVuZCBhbmQgaSA8IG46CiAgICAgICAgICAgIHNlbGYuaGFuZGxlX2RhdGEocmF3ZGF0YVtpOm5dKQogICAgICAgICAgICBpID0gbgogICAgICAgIHNlbGYucmF3ZGF0YSA9IHJhd2RhdGFbaTpdCiAgICAgICAgIyBYWFggaWYgZW5kOiBjaGVjayBmb3IgZW1wdHkgc3RhY2sKCiAgICAjIEV4dGVuc2lvbnMgZm9yIHRoZSBET0NUWVBFIHNjYW5uZXI6CiAgICBfZGVjbF9vdGhlcmNoYXJzID0gJz0nCgogICAgIyBJbnRlcm5hbCAtLSBwYXJzZSBwcm9jZXNzaW5nIGluc3RyLCByZXR1cm4gbGVuZ3RoIG9yIC0xIGlmIG5vdCB0ZXJtaW5hdGVkCiAgICBkZWYgcGFyc2VfcGkoc2VsZiwgaSk6CiAgICAgICAgcmF3ZGF0YSA9IHNlbGYucmF3ZGF0YQogICAgICAgIGlmIHJhd2RhdGFbaTppKzJdICE9ICc8Pyc6CiAgICAgICAgICAgIHNlbGYuZXJyb3IoJ3VuZXhwZWN0ZWQgY2FsbCB0byBwYXJzZV9waSgpJykKICAgICAgICBtYXRjaCA9IHBpY2xvc2Uuc2VhcmNoKHJhd2RhdGEsIGkrMikKICAgICAgICBpZiBub3QgbWF0Y2g6CiAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgIGogPSBtYXRjaC5zdGFydCgwKQogICAgICAgIHNlbGYuaGFuZGxlX3BpKHJhd2RhdGFbaSsyOiBqXSkKICAgICAgICBqID0gbWF0Y2guZW5kKDApCiAgICAgICAgcmV0dXJuIGotaQoKICAgIGRlZiBnZXRfc3RhcnR0YWdfdGV4dChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fX3N0YXJ0dGFnX3RleHQKCiAgICAjIEludGVybmFsIC0tIGhhbmRsZSBzdGFydHRhZywgcmV0dXJuIGxlbmd0aCBvciAtMSBpZiBub3QgdGVybWluYXRlZAogICAgZGVmIHBhcnNlX3N0YXJ0dGFnKHNlbGYsIGkpOgogICAgICAgIHNlbGYuX19zdGFydHRhZ190ZXh0ID0gTm9uZQogICAgICAgIHN0YXJ0X3BvcyA9IGkKICAgICAgICByYXdkYXRhID0gc2VsZi5yYXdkYXRhCiAgICAgICAgaWYgc2hvcnR0YWdvcGVuLm1hdGNoKHJhd2RhdGEsIGkpOgogICAgICAgICAgICAjIFNHTUwgc2hvcnRoYW5kOiA8dGFnL2RhdGEvID09IDx0YWc+ZGF0YTwvdGFnPgogICAgICAgICAgICAjIFhYWCBDYW4gZGF0YSBjb250YWluICYuLi4gKGVudGl0eSBvciBjaGFyIHJlZnMpPwogICAgICAgICAgICAjIFhYWCBDYW4gZGF0YSBjb250YWluIDwgb3IgPiAodGFnIGNoYXJhY3RlcnMpPwogICAgICAgICAgICAjIFhYWCBDYW4gdGhlcmUgYmUgd2hpdGVzcGFjZSBiZWZvcmUgdGhlIGZpcnN0IC8/CiAgICAgICAgICAgIG1hdGNoID0gc2hvcnR0YWcubWF0Y2gocmF3ZGF0YSwgaSkKICAgICAgICAgICAgaWYgbm90IG1hdGNoOgogICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgIHRhZywgZGF0YSA9IG1hdGNoLmdyb3VwKDEsIDIpCiAgICAgICAgICAgIHNlbGYuX19zdGFydHRhZ190ZXh0ID0gJzwlcy8nICUgdGFnCiAgICAgICAgICAgIHRhZyA9IHRhZy5sb3dlcigpCiAgICAgICAgICAgIGsgPSBtYXRjaC5lbmQoMCkKICAgICAgICAgICAgc2VsZi5maW5pc2hfc2hvcnR0YWcodGFnLCBkYXRhKQogICAgICAgICAgICBzZWxmLl9fc3RhcnR0YWdfdGV4dCA9IHJhd2RhdGFbc3RhcnRfcG9zOm1hdGNoLmVuZCgxKSArIDFdCiAgICAgICAgICAgIHJldHVybiBrCiAgICAgICAgIyBYWFggVGhlIGZvbGxvd2luZyBzaG91bGQgc2tpcCBtYXRjaGluZyBxdW90ZXMgKCcgb3IgIikKICAgICAgICAjIEFzIGEgc2hvcnRjdXQgd2F5IHRvIGV4aXQsIHRoaXMgaXNuJ3Qgc28gYmFkLCBidXQgc2hvdWxkbid0CiAgICAgICAgIyBiZSB1c2VkIHRvIGxvY2F0ZSB0aGUgYWN0dWFsIGVuZCBvZiB0aGUgc3RhcnQgdGFnIHNpbmNlIHRoZQogICAgICAgICMgPCBvciA+IGNoYXJhY3RlcnMgbWF5IGJlIGVtYmVkZGVkIGluIGFuIGF0dHJpYnV0ZSB2YWx1ZS4KICAgICAgICBtYXRjaCA9IGVuZGJyYWNrZXQuc2VhcmNoKHJhd2RhdGEsIGkrMSkKICAgICAgICBpZiBub3QgbWF0Y2g6CiAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgIGogPSBtYXRjaC5zdGFydCgwKQogICAgICAgICMgTm93IHBhcnNlIHRoZSBkYXRhIGJldHdlZW4gaSsxIGFuZCBqIGludG8gYSB0YWcgYW5kIGF0dHJzCiAgICAgICAgYXR0cnMgPSBbXQogICAgICAgIGlmIHJhd2RhdGFbaTppKzJdID09ICc8Pic6CiAgICAgICAgICAgICMgU0dNTCBzaG9ydGhhbmQ6IDw+ID09IDxsYXN0IG9wZW4gdGFnIHNlZW4+CiAgICAgICAgICAgIGsgPSBqCiAgICAgICAgICAgIHRhZyA9IHNlbGYubGFzdHRhZwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1hdGNoID0gdGFnZmluZC5tYXRjaChyYXdkYXRhLCBpKzEpCiAgICAgICAgICAgIGlmIG5vdCBtYXRjaDoKICAgICAgICAgICAgICAgIHNlbGYuZXJyb3IoJ3VuZXhwZWN0ZWQgY2FsbCB0byBwYXJzZV9zdGFydHRhZycpCiAgICAgICAgICAgIGsgPSBtYXRjaC5lbmQoMCkKICAgICAgICAgICAgdGFnID0gcmF3ZGF0YVtpKzE6a10ubG93ZXIoKQogICAgICAgICAgICBzZWxmLmxhc3R0YWcgPSB0YWcKICAgICAgICB3aGlsZSBrIDwgajoKICAgICAgICAgICAgbWF0Y2ggPSBhdHRyZmluZC5tYXRjaChyYXdkYXRhLCBrKQogICAgICAgICAgICBpZiBub3QgbWF0Y2g6IGJyZWFrCiAgICAgICAgICAgIGF0dHJuYW1lLCByZXN0LCBhdHRydmFsdWUgPSBtYXRjaC5ncm91cCgxLCAyLCAzKQogICAgICAgICAgICBpZiBub3QgcmVzdDoKICAgICAgICAgICAgICAgIGF0dHJ2YWx1ZSA9IGF0dHJuYW1lCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiAoYXR0cnZhbHVlWzoxXSA9PSAiJyIgPT0gYXR0cnZhbHVlWy0xOl0gb3IKICAgICAgICAgICAgICAgICAgICBhdHRydmFsdWVbOjFdID09ICciJyA9PSBhdHRydmFsdWVbLTE6XSk6CiAgICAgICAgICAgICAgICAgICAgIyBzdHJpcCBxdW90ZXMKICAgICAgICAgICAgICAgICAgICBhdHRydmFsdWUgPSBhdHRydmFsdWVbMTotMV0KICAgICAgICAgICAgICAgIGF0dHJ2YWx1ZSA9IHNlbGYuZW50aXR5X29yX2NoYXJyZWYuc3ViKAogICAgICAgICAgICAgICAgICAgIHNlbGYuX2NvbnZlcnRfcmVmLCBhdHRydmFsdWUpCiAgICAgICAgICAgIGF0dHJzLmFwcGVuZCgoYXR0cm5hbWUubG93ZXIoKSwgYXR0cnZhbHVlKSkKICAgICAgICAgICAgayA9IG1hdGNoLmVuZCgwKQogICAgICAgIGlmIHJhd2RhdGFbal0gPT0gJz4nOgogICAgICAgICAgICBqID0gaisxCiAgICAgICAgc2VsZi5fX3N0YXJ0dGFnX3RleHQgPSByYXdkYXRhW3N0YXJ0X3BvczpqXQogICAgICAgIHNlbGYuZmluaXNoX3N0YXJ0dGFnKHRhZywgYXR0cnMpCiAgICAgICAgcmV0dXJuIGoKCiAgICAjIEludGVybmFsIC0tIGNvbnZlcnQgZW50aXR5IG9yIGNoYXJhY3RlciByZWZlcmVuY2UKICAgIGRlZiBfY29udmVydF9yZWYoc2VsZiwgbWF0Y2gpOgogICAgICAgIGlmIG1hdGNoLmdyb3VwKDIpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5jb252ZXJ0X2NoYXJyZWYobWF0Y2guZ3JvdXAoMikpIG9yIFwKICAgICAgICAgICAgICAgICcmIyVzJXMnICUgbWF0Y2guZ3JvdXBzKClbMTpdCiAgICAgICAgZWxpZiBtYXRjaC5ncm91cCgzKToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29udmVydF9lbnRpdHlyZWYobWF0Y2guZ3JvdXAoMSkpIG9yIFwKICAgICAgICAgICAgICAgICcmJXM7JyAlIG1hdGNoLmdyb3VwKDEpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuICcmJXMnICUgbWF0Y2guZ3JvdXAoMSkKCiAgICAjIEludGVybmFsIC0tIHBhcnNlIGVuZHRhZwogICAgZGVmIHBhcnNlX2VuZHRhZyhzZWxmLCBpKToKICAgICAgICByYXdkYXRhID0gc2VsZi5yYXdkYXRhCiAgICAgICAgbWF0Y2ggPSBlbmRicmFja2V0LnNlYXJjaChyYXdkYXRhLCBpKzEpCiAgICAgICAgaWYgbm90IG1hdGNoOgogICAgICAgICAgICByZXR1cm4gLTEKICAgICAgICBqID0gbWF0Y2guc3RhcnQoMCkKICAgICAgICB0YWcgPSByYXdkYXRhW2krMjpqXS5zdHJpcCgpLmxvd2VyKCkKICAgICAgICBpZiByYXdkYXRhW2pdID09ICc+JzoKICAgICAgICAgICAgaiA9IGorMQogICAgICAgIHNlbGYuZmluaXNoX2VuZHRhZyh0YWcpCiAgICAgICAgcmV0dXJuIGoKCiAgICAjIEludGVybmFsIC0tIGZpbmlzaCBwYXJzaW5nIG9mIDx0YWcvZGF0YS8gKHNhbWUgYXMgPHRhZz5kYXRhPC90YWc+KQogICAgZGVmIGZpbmlzaF9zaG9ydHRhZyhzZWxmLCB0YWcsIGRhdGEpOgogICAgICAgIHNlbGYuZmluaXNoX3N0YXJ0dGFnKHRhZywgW10pCiAgICAgICAgc2VsZi5oYW5kbGVfZGF0YShkYXRhKQogICAgICAgIHNlbGYuZmluaXNoX2VuZHRhZyh0YWcpCgogICAgIyBJbnRlcm5hbCAtLSBmaW5pc2ggcHJvY2Vzc2luZyBvZiBzdGFydCB0YWcKICAgICMgUmV0dXJuIC0xIGZvciB1bmtub3duIHRhZywgMCBmb3Igb3Blbi1vbmx5IHRhZywgMSBmb3IgYmFsYW5jZWQgdGFnCiAgICBkZWYgZmluaXNoX3N0YXJ0dGFnKHNlbGYsIHRhZywgYXR0cnMpOgogICAgICAgIHRyeToKICAgICAgICAgICAgbWV0aG9kID0gZ2V0YXR0cihzZWxmLCAnc3RhcnRfJyArIHRhZykKICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG1ldGhvZCA9IGdldGF0dHIoc2VsZiwgJ2RvXycgKyB0YWcpCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgIHNlbGYudW5rbm93bl9zdGFydHRhZyh0YWcsIGF0dHJzKQogICAgICAgICAgICAgICAgcmV0dXJuIC0xCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZV9zdGFydHRhZyh0YWcsIG1ldGhvZCwgYXR0cnMpCiAgICAgICAgICAgICAgICByZXR1cm4gMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuc3RhY2suYXBwZW5kKHRhZykKICAgICAgICAgICAgc2VsZi5oYW5kbGVfc3RhcnR0YWcodGFnLCBtZXRob2QsIGF0dHJzKQogICAgICAgICAgICByZXR1cm4gMQoKICAgICMgSW50ZXJuYWwgLS0gZmluaXNoIHByb2Nlc3Npbmcgb2YgZW5kIHRhZwogICAgZGVmIGZpbmlzaF9lbmR0YWcoc2VsZiwgdGFnKToKICAgICAgICBpZiBub3QgdGFnOgogICAgICAgICAgICBmb3VuZCA9IGxlbihzZWxmLnN0YWNrKSAtIDEKICAgICAgICAgICAgaWYgZm91bmQgPCAwOgogICAgICAgICAgICAgICAgc2VsZi51bmtub3duX2VuZHRhZyh0YWcpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiB0YWcgbm90IGluIHNlbGYuc3RhY2s6CiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gZ2V0YXR0cihzZWxmLCAnZW5kXycgKyB0YWcpCiAgICAgICAgICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgc2VsZi51bmtub3duX2VuZHRhZyh0YWcpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHNlbGYucmVwb3J0X3VuYmFsYW5jZWQodGFnKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIGZvdW5kID0gbGVuKHNlbGYuc3RhY2spCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGZvdW5kKToKICAgICAgICAgICAgICAgIGlmIHNlbGYuc3RhY2tbaV0gPT0gdGFnOiBmb3VuZCA9IGkKICAgICAgICB3aGlsZSBsZW4oc2VsZi5zdGFjaykgPiBmb3VuZDoKICAgICAgICAgICAgdGFnID0gc2VsZi5zdGFja1stMV0KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbWV0aG9kID0gZ2V0YXR0cihzZWxmLCAnZW5kXycgKyB0YWcpCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoKICAgICAgICAgICAgICAgIG1ldGhvZCA9IE5vbmUKICAgICAgICAgICAgaWYgbWV0aG9kOgogICAgICAgICAgICAgICAgc2VsZi5oYW5kbGVfZW5kdGFnKHRhZywgbWV0aG9kKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc2VsZi51bmtub3duX2VuZHRhZyh0YWcpCiAgICAgICAgICAgIGRlbCBzZWxmLnN0YWNrWy0xXQoKICAgICMgT3ZlcnJpZGFibGUgLS0gaGFuZGxlIHN0YXJ0IHRhZwogICAgZGVmIGhhbmRsZV9zdGFydHRhZyhzZWxmLCB0YWcsIG1ldGhvZCwgYXR0cnMpOgogICAgICAgIG1ldGhvZChhdHRycykKCiAgICAjIE92ZXJyaWRhYmxlIC0tIGhhbmRsZSBlbmQgdGFnCiAgICBkZWYgaGFuZGxlX2VuZHRhZyhzZWxmLCB0YWcsIG1ldGhvZCk6CiAgICAgICAgbWV0aG9kKCkKCiAgICAjIEV4YW1wbGUgLS0gcmVwb3J0IGFuIHVuYmFsYW5jZWQgPC8uLi4+IHRhZy4KICAgIGRlZiByZXBvcnRfdW5iYWxhbmNlZChzZWxmLCB0YWcpOgogICAgICAgIGlmIHNlbGYudmVyYm9zZToKICAgICAgICAgICAgcHJpbnQoJyoqKiBVbmJhbGFuY2VkIDwvJyArIHRhZyArICc+JykKICAgICAgICAgICAgcHJpbnQoJyoqKiBTdGFjazonLCBzZWxmLnN0YWNrKQoKICAgIGRlZiBjb252ZXJ0X2NoYXJyZWYoc2VsZiwgbmFtZSk6CiAgICAgICAgIiIiQ29udmVydCBjaGFyYWN0ZXIgcmVmZXJlbmNlLCBtYXkgYmUgb3ZlcnJpZGRlbi4iIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIG4gPSBpbnQobmFtZSkKICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgbm90IDAgPD0gbiA8PSAxMjc6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHJldHVybiBzZWxmLmNvbnZlcnRfY29kZXBvaW50KG4pCgogICAgZGVmIGNvbnZlcnRfY29kZXBvaW50KHNlbGYsIGNvZGVwb2ludCk6CiAgICAgICAgcmV0dXJuIGNocihjb2RlcG9pbnQpCgogICAgZGVmIGhhbmRsZV9jaGFycmVmKHNlbGYsIG5hbWUpOgogICAgICAgICIiIkhhbmRsZSBjaGFyYWN0ZXIgcmVmZXJlbmNlLCBubyBuZWVkIHRvIG92ZXJyaWRlLiIiIgogICAgICAgIHJlcGxhY2VtZW50ID0gc2VsZi5jb252ZXJ0X2NoYXJyZWYobmFtZSkKICAgICAgICBpZiByZXBsYWNlbWVudCBpcyBOb25lOgogICAgICAgICAgICBzZWxmLnVua25vd25fY2hhcnJlZihuYW1lKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuaGFuZGxlX2RhdGEocmVwbGFjZW1lbnQpCgogICAgIyBEZWZpbml0aW9uIG9mIGVudGl0aWVzIC0tIGRlcml2ZWQgY2xhc3NlcyBtYXkgb3ZlcnJpZGUKICAgIGVudGl0eWRlZnMgPSBcCiAgICAgICAgICAgIHsnbHQnOiAnPCcsICdndCc6ICc+JywgJ2FtcCc6ICcmJywgJ3F1b3QnOiAnIicsICdhcG9zJzogJ1wnJ30KCiAgICBkZWYgY29udmVydF9lbnRpdHlyZWYoc2VsZiwgbmFtZSk6CiAgICAgICAgIiIiQ29udmVydCBlbnRpdHkgcmVmZXJlbmNlcy4KCiAgICAgICAgQXMgYW4gYWx0ZXJuYXRpdmUgdG8gb3ZlcnJpZGluZyB0aGlzIG1ldGhvZDsgb25lIGNhbiB0YWlsb3IgdGhlCiAgICAgICAgcmVzdWx0cyBieSBzZXR0aW5nIHVwIHRoZSBzZWxmLmVudGl0eWRlZnMgbWFwcGluZyBhcHByb3ByaWF0ZWx5LgogICAgICAgICIiIgogICAgICAgIHRhYmxlID0gc2VsZi5lbnRpdHlkZWZzCiAgICAgICAgaWYgbmFtZSBpbiB0YWJsZToKICAgICAgICAgICAgcmV0dXJuIHRhYmxlW25hbWVdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuCgogICAgZGVmIGhhbmRsZV9lbnRpdHlyZWYoc2VsZiwgbmFtZSk6CiAgICAgICAgIiIiSGFuZGxlIGVudGl0eSByZWZlcmVuY2VzLCBubyBuZWVkIHRvIG92ZXJyaWRlLiIiIgogICAgICAgIHJlcGxhY2VtZW50ID0gc2VsZi5jb252ZXJ0X2VudGl0eXJlZihuYW1lKQogICAgICAgIGlmIHJlcGxhY2VtZW50IGlzIE5vbmU6CiAgICAgICAgICAgIHNlbGYudW5rbm93bl9lbnRpdHlyZWYobmFtZSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmhhbmRsZV9kYXRhKHJlcGxhY2VtZW50KQoKICAgICMgRXhhbXBsZSAtLSBoYW5kbGUgZGF0YSwgc2hvdWxkIGJlIG92ZXJyaWRkZW4KICAgIGRlZiBoYW5kbGVfZGF0YShzZWxmLCBkYXRhKToKICAgICAgICBwYXNzCgogICAgIyBFeGFtcGxlIC0tIGhhbmRsZSBjb21tZW50LCBjb3VsZCBiZSBvdmVycmlkZGVuCiAgICBkZWYgaGFuZGxlX2NvbW1lbnQoc2VsZiwgZGF0YSk6CiAgICAgICAgcGFzcwoKICAgICMgRXhhbXBsZSAtLSBoYW5kbGUgZGVjbGFyYXRpb24sIGNvdWxkIGJlIG92ZXJyaWRkZW4KICAgIGRlZiBoYW5kbGVfZGVjbChzZWxmLCBkZWNsKToKICAgICAgICBwYXNzCgogICAgIyBFeGFtcGxlIC0tIGhhbmRsZSBwcm9jZXNzaW5nIGluc3RydWN0aW9uLCBjb3VsZCBiZSBvdmVycmlkZGVuCiAgICBkZWYgaGFuZGxlX3BpKHNlbGYsIGRhdGEpOgogICAgICAgIHBhc3MKCiAgICAjIFRvIGJlIG92ZXJyaWRkZW4gLS0gaGFuZGxlcnMgZm9yIHVua25vd24gb2JqZWN0cwogICAgZGVmIHVua25vd25fc3RhcnR0YWcoc2VsZiwgdGFnLCBhdHRycyk6IHBhc3MKICAgIGRlZiB1bmtub3duX2VuZHRhZyhzZWxmLCB0YWcpOiBwYXNzCiAgICBkZWYgdW5rbm93bl9jaGFycmVmKHNlbGYsIHJlZik6IHBhc3MKICAgIGRlZiB1bmtub3duX2VudGl0eXJlZihzZWxmLCByZWYpOiBwYXNzCgoKY2xhc3MgVGVzdFNHTUxQYXJzZXIoU0dNTFBhcnNlcik6CgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHZlcmJvc2U9MCk6CiAgICAgICAgc2VsZi50ZXN0ZGF0YSA9ICIiCiAgICAgICAgU0dNTFBhcnNlci5fX2luaXRfXyhzZWxmLCB2ZXJib3NlKQoKICAgIGRlZiBoYW5kbGVfZGF0YShzZWxmLCBkYXRhKToKICAgICAgICBzZWxmLnRlc3RkYXRhID0gc2VsZi50ZXN0ZGF0YSArIGRhdGEKICAgICAgICBpZiBsZW4ocmVwcihzZWxmLnRlc3RkYXRhKSkgPj0gNzA6CiAgICAgICAgICAgIHNlbGYuZmx1c2goKQoKICAgIGRlZiBmbHVzaChzZWxmKToKICAgICAgICBkYXRhID0gc2VsZi50ZXN0ZGF0YQogICAgICAgIGlmIGRhdGE6CiAgICAgICAgICAgIHNlbGYudGVzdGRhdGEgPSAiIgogICAgICAgICAgICBwcmludCgnZGF0YTonLCByZXByKGRhdGEpKQoKICAgIGRlZiBoYW5kbGVfY29tbWVudChzZWxmLCBkYXRhKToKICAgICAgICBzZWxmLmZsdXNoKCkKICAgICAgICByID0gcmVwcihkYXRhKQogICAgICAgIGlmIGxlbihyKSA+IDY4OgogICAgICAgICAgICByID0gcls6MzJdICsgJy4uLicgKyByWy0zMjpdCiAgICAgICAgcHJpbnQoJ2NvbW1lbnQ6JywgcikKCiAgICBkZWYgdW5rbm93bl9zdGFydHRhZyhzZWxmLCB0YWcsIGF0dHJzKToKICAgICAgICBzZWxmLmZsdXNoKCkKICAgICAgICBpZiBub3QgYXR0cnM6CiAgICAgICAgICAgIHByaW50KCdzdGFydCB0YWc6IDwnICsgdGFnICsgJz4nKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCdzdGFydCB0YWc6IDwnICsgdGFnLCBlbmQ9JyAnKQogICAgICAgICAgICBmb3IgbmFtZSwgdmFsdWUgaW4gYXR0cnM6CiAgICAgICAgICAgICAgICBwcmludChuYW1lICsgJz0nICsgJyInICsgdmFsdWUgKyAnIicsIGVuZD0nICcpCiAgICAgICAgICAgIHByaW50KCc+JykKCiAgICBkZWYgdW5rbm93bl9lbmR0YWcoc2VsZiwgdGFnKToKICAgICAgICBzZWxmLmZsdXNoKCkKICAgICAgICBwcmludCgnZW5kIHRhZzogPC8nICsgdGFnICsgJz4nKQoKICAgIGRlZiB1bmtub3duX2VudGl0eXJlZihzZWxmLCByZWYpOgogICAgICAgIHNlbGYuZmx1c2goKQogICAgICAgIHByaW50KCcqKiogdW5rbm93biBlbnRpdHkgcmVmOiAmJyArIHJlZiArICc7JykKCiAgICBkZWYgdW5rbm93bl9jaGFycmVmKHNlbGYsIHJlZik6CiAgICAgICAgc2VsZi5mbHVzaCgpCiAgICAgICAgcHJpbnQoJyoqKiB1bmtub3duIGNoYXIgcmVmOiAmIycgKyByZWYgKyAnOycpCgogICAgZGVmIHVua25vd25fZGVjbChzZWxmLCBkYXRhKToKICAgICAgICBzZWxmLmZsdXNoKCkKICAgICAgICBwcmludCgnKioqIHVua25vd24gZGVjbDogWycgKyBkYXRhICsgJ10nKQoKICAgIGRlZiBjbG9zZShzZWxmKToKICAgICAgICBTR01MUGFyc2VyLmNsb3NlKHNlbGYpCiAgICAgICAgc2VsZi5mbHVzaCgpCgoKZGVmIHRlc3QoYXJncyA9IE5vbmUpOgogICAgaW1wb3J0IHN5cwoKICAgIGlmIGFyZ3MgaXMgTm9uZToKICAgICAgICBhcmdzID0gc3lzLmFyZ3ZbMTpdCgogICAgaWYgYXJncyBhbmQgYXJnc1swXSA9PSAnLXMnOgogICAgICAgIGFyZ3MgPSBhcmdzWzE6XQogICAgICAgIGtsYXNzID0gU0dNTFBhcnNlcgogICAgZWxzZToKICAgICAgICBrbGFzcyA9IFRlc3RTR01MUGFyc2VyCgogICAgaWYgYXJnczoKICAgICAgICBmaWxlID0gYXJnc1swXQogICAgZWxzZToKICAgICAgICBmaWxlID0gJ3Rlc3QuaHRtbCcKCiAgICBpZiBmaWxlID09ICctJzoKICAgICAgICBmID0gc3lzLnN0ZGluCiAgICBlbHNlOgogICAgICAgIHRyeToKICAgICAgICAgICAgZiA9IG9wZW4oZmlsZSwgJ3InKQogICAgICAgIGV4Y2VwdCBJT0Vycm9yIGFzIG1zZzoKICAgICAgICAgICAgcHJpbnQoZmlsZSwgIjoiLCBtc2cpCiAgICAgICAgICAgIHN5cy5leGl0KDEpCgogICAgZGF0YSA9IGYucmVhZCgpCiAgICBpZiBmIGlzIG5vdCBzeXMuc3RkaW46CiAgICAgICAgZi5jbG9zZSgpCgogICAgeCA9IGtsYXNzKCkKICAgIGZvciBjIGluIGRhdGE6CiAgICAgICAgeC5mZWVkKGMpCiAgICB4LmNsb3NlKCkKCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgdGVzdCgpCg=="},"feedparser":{"name":"feedparser","children":["sgml.py",{"name":"parsers","children":["strict.py","__init__.py","loose.py"]},"sanitizer.py","mixin.py","encodings.py","util.py","html.py","__init__.py",{"name":"namespaces","children":["cc.py","_base.py","dc.py","itunes.py","psc.py","__init__.py","admin.py","georss.py","mediarss.py"]},"api.py",{"name":"datetimes","children":["asctime.py","greek.py","hungarian.py","rfc822.py","__init__.py","perforce.py","w3dtf.py","iso8601.py","korean.py"]},"http.py","exceptions.py","urls.py","LICENSE"]}}